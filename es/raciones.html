<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Allpa ¬∑ Calculadora diaria de raciones</title>
  <meta name="description" content="Calculadora de raciones diarias para pollos ‚Äì Allpa" />
  <style>
    :root{
      --emerald-800:#065f46; --emerald-700:#047857; --emerald-500:#10b981;
      --neutral-50:#fafafa; --neutral-200:#e5e5e5; --neutral-600:#525252; --neutral-700:#404040; --neutral-900:#171717;
      --white:#fff; --black:#000;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif;color:var(--neutral-900);background:var(--neutral-50)}
    .container{max-width:960px;margin:0 auto;padding:24px}
    header{color:var(--white);background:linear-gradient(90deg,var(--emerald-800),var(--emerald-700),var(--emerald-500));}
    header .wrap{display:flex;align-items:center;justify-content:space-between;padding:12px 16px}
    h1{margin:0;font-size:22px;font-weight:700}
    .btn{display:inline-flex;align-items:center;gap:8px;border-radius:12px;border:1px solid transparent;padding:8px 12px;font-size:14px;cursor:pointer}
    .btn-share{background:rgba(255,255,255,.1);color:#fff;border-color:rgba(255,255,255,.2)}
    .btn-share:hover{background:rgba(255,255,255,.2)}
    .card{background:#fff;border:1px solid var(--neutral-200);border-radius:16px;padding:16px}
    .grid{display:grid;gap:16px}
    .grid-2{grid-template-columns:1fr;}
    .grid-3{grid-template-columns:1fr;}
    @media(min-width:768px){.grid-2{grid-template-columns:1fr 1fr}.grid-3{grid-template-columns:repeat(3,1fr)}}
    label{font-size:14px;font-weight:600}
    input[type="number"],select,textarea{width:100%;border:1px solid var(--neutral-200);border-radius:12px;padding:8px 10px;margin-top:6px;font-size:14px}
    input[type="range"]{width:100%}
    table{width:100%;border-collapse:collapse;font-size:14px}
    th,td{padding:8px 6px;border-top:1px solid var(--neutral-200);text-align:left}
    .stat{background:#f5f5f5;border:1px solid var(--neutral-200);border-radius:12px;padding:12px}
    .stat .k{font-size:12px;letter-spacing:.06em;color:var(--neutral-600);text-transform:uppercase}
    .stat .v{font-size:18px;font-weight:700}
    .progress{height:10px;border-radius:999px;background:#e5e5e5;overflow:hidden}
    .progress > span{display:block;height:100%;background:var(--emerald-600,#059669);width:0}
    .text-xs{font-size:12px;color:var(--neutral-600)}
    footer.magnet{position:fixed;left:0;right:0;bottom:0;padding:16px}
    .magnet .bar{max-width:960px;margin:0 auto;background:#fff;border:1px solid var(--neutral-200);border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,.08)}
    .magnet .bar .inner{display:flex;align-items:center;justify-content:space-between;padding:12px 16px}
    .btn-prim{background:var(--black);color:#fff}
    .btn-sec{background:#fff;border-color:var(--neutral-200)}
    .hidden{display:none}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Allpa ¬∑ Calculadora diaria de raciones</h1>
      <div style="display:flex;align-items:center;gap:8px">
        <button id="btnShare" class="btn btn-share">Compartir</button>
        <div class="text-xs">Racha: <b id="streak">0</b> d√≠a(s)</div>
      </div>
    </div>
  </header>

  <main class="container grid" style="padding-bottom:120px">
    <!-- Datos del lote -->
    <section class="card grid">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
        <h2 style="margin:0;font-size:18px">Datos del lote</h2>
        <div id="savedWrap" class="hidden" style="display:flex;align-items:center;gap:8px">
          <label class="text-xs" for="savedSelect">Cargar registro:</label>
          <select id="savedSelect"></select>
        </div>
      </div>

      <div class="grid" style="grid-template-columns:1fr;gap:16px">
        <div class="grid" style="grid-template-columns:1fr 1fr;gap:16px">
          <div>
            <label>Raza</label>
            <select id="breed">
              <option value="cobb500">Cobb 500</option>
              <option value="ross308">Ross 308</option>
              <option value="hubbard">Hubbard</option>
              <option value="otra">Otra / mi l√≠nea</option>
            </select>
          </div>
          <div>
            <label>Cantidad de pollos</label>
            <input id="count" type="number" min="1" value="100" />
          </div>
        </div>
        <div>
          <label style="display:flex;align-items:center;justify-content:space-between">
            <span>Edad (d√≠as)</span>
            <span class="text-xs">D√≠a seleccionado: <b id="ageLabel">1</b>/56</span>
          </label>
          <input id="age" type="range" min="1" max="56" value="1" />
        </div>
        <p class="text-xs">Usa la calculadora a diario: tus observaciones y la hora quedan registradas autom√°ticamente para trazabilidad.</p>
      </div>
    </section>

    <!-- Resultados -->
    <section class="card grid">
      <h2 style="margin:0;font-size:18px">Resultados de hoy</h2>
      <div class="grid grid-3">
        <div class="stat"><div class="k">Peso esperado hoy (g/ave)</div><div class="v" id="statWeight">0 g</div></div>
        <div class="stat"><div class="k">Consumo recomendado (g/ave/d√≠a)</div><div class="v" id="statIntake">0 g</div></div>
        <div class="stat"><div class="k">Total de alimento (kg/d√≠a)</div><div class="v" id="statTotal">0 kg</div></div>
      </div>

      <div class="grid grid-2">
        <div class="card" style="padding:12px">
          <p style="margin:.2rem 0;font-weight:600">Horario recomendado</p>
          <p id="scheduleSummary" class="text-xs" style="margin:.2rem 0 8px"></p>
          <div id="scheduleTableWrap"></div>
        </div>

        <div class="card" style="padding:12px">
          <div style="margin-bottom:8px">
            <p style="margin:.2rem 0;font-weight:600">Tipo de alimento para hoy</p>
            <p id="feedStage" class="text-xs" style="margin:.2rem 0"></p>
          </div>
          <div style="margin-bottom:8px">
            <p style="margin:.2rem 0;font-weight:600">Consejo del d√≠a</p>
            <p id="tip" class="text-xs" style="margin:.2rem 0"></p>
          </div>
          <div>
            <p style="margin:.2rem 0;font-weight:600">Progreso del ciclo</p>
            <div class="progress"><span id="progressBar"></span></div>
            <p class="text-xs" id="progressText" style="margin:.2rem 0"></p>
          </div>
        </div>
      </div>

      <div class="grid grid-2">
        <div>
          <label>Observaciones de hoy</label>
          <textarea id="note" rows="4" placeholder="Ej.: consumo bajo por calor al mediod√≠a, mejorar ventilaci√≥n"></textarea>
        </div>
        <div class="card" style="padding:12px">
          <button id="btnSave" class="btn btn-prim" style="width:100%">üíæ Guardar registro de hoy</button>
          <p class="text-xs" id="lastSaveText" style="margin-top:8px">√öltimo guardado: ‚Äî</p>
          <div id="yesterdayWrap" class="hidden" style="margin-top:8px">
            <p style="margin:.2rem 0;font-weight:600">Ayer (<span id="yesterdayDate"></span>)</p>
            <ul class="text-xs" style="margin:.2rem 0 0 1rem">
              <li>Edad: <span id="yAge"></span> d√≠as</li>
              <li>Peso esperado: <span id="yWeight"></span> g</li>
              <li>Consumo: <span id="yIntake"></span> g/ave/d√≠a</li>
              <li>Total alimento: <span id="yTotal"></span> kg</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Buenas pr√°cticas -->
    <section class="card">
      <h2 style="margin:0 0 8px;font-size:18px">Buenas pr√°cticas r√°pidas</h2>
      <ul class="text-xs" style="margin:.2rem 0 0 1rem;line-height:1.6">
        <li>En d√≠as 3‚Äì5, usa raciones peque√±as y frecuentes para estimular el consumo.</li>
        <li>En climas c√°lidos, prioriza mayor % de la raci√≥n en la ma√±ana.</li>
        <li>Revisa a diario ventilaci√≥n, cama, agua y comportamiento.</li>
        <li>Pesa una muestra de aves semanalmente para validar el peso real vs esperado.</li>
      </ul>
    </section>
  </main>

  <!-- Footer magn√©tico -->
  <footer class="magnet">
    <div class="bar">
      <div class="inner">
        <div>
          <p style="margin:0;font-weight:600">¬øTe sirvi√≥ la calculadora?</p>
          <p class="text-xs" style="margin:2px 0 0">Sigue al Pollo Ingeniero y apoya el proyecto Allpa</p>
        </div>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <a class="btn btn-prim" href="#">S√≠guenos en TikTok</a>
          <a class="btn btn-sec" href="#">Donaciones (Nequi)</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Opci√≥n 1: JS externo en /js/app.js -->
  <script src="js/app2.js"></script>

  <!-- Opci√≥n 2 (r√°pida): pegar el mismo JS ac√° si no vas a usar carpeta js
  <script>
    // Pega aqu√≠ el contenido de js/app.js si prefieres un √∫nico archivo HTML.
  </script>
  -->
</body>
</html>